# Cloudflare AutoRAG UI

This project provides a user interface for interacting with a Cloudflare AutoRAG instance. It allows users to ask questions, view answers generated by AutoRAG, and save/manage question-answer pairs.

The application is built using:

- **Frontend:** React, React Router v7, Vite, Tailwind CSS
- **Backend:** Cloudflare Workers
- **Database:** Cloudflare D1
- **AI:** Cloudflare Workers AI (specifically the AutoRAG feature)

## Features

- 💬 Ask questions to your configured Cloudflare AutoRAG instance.
- 💾 Save interesting question/answer pairs to a Cloudflare D1 database.
- 📂 Browse and view previously saved answers.
- 🔗 Share links to specific saved answers.
- 🗑️ Delete saved answers.
- 🌗 Light and Dark mode support, styled to match Cloudflare's design.
- 🚀 Deployed on Cloudflare Workers for global low-latency access.
- ⚡️ Vite-powered development with Hot Module Replacement (HMR).
- 🔒 TypeScript throughout the stack.

## Getting Started - Setup for Your AutoRAG

Follow these steps to set up and run this UI with your _own_ Cloudflare AutoRAG instance and D1 database.

**Prerequisites:**

- [npm](https://npmjs.com/), [pnpm](https://pnpm.io/), or [yarn](https://yarnpkg.com/)
- [Wrangler CLI](https://developers.cloudflare.com/workers/wrangler/install/) installed and authenticated (`wrangler login`)

**Steps:**

1.  **Clone the Repository:**

    ```bash
    git clone https://github.com/dhannusch/auto-rag-ui.git
    cd auto-rag-ui
    ```

2.  **Install Dependencies:**

    ```bash
    npm install
    # or pnpm install / yarn install
    ```

3.  **Configure Cloudflare D1 Database:**

    - Create a new D1 database using Wrangler:

    ```bash
    npx wrangler d1 create auto_rag_saved_answers
    ```

    _(You can choose a different name, but update `wrangler.jsonc` accordingly)_

    - Copy the `database_id` output from the previous command.
      c. Open `wrangler.jsonc` and paste the copied `database_id` into the `d1_databases` binding section, replacing the placeholder value:

    ```jsonc
    // wrangler.jsonc
    // ...
    "d1_databases": [
    {
    "binding": "DB",
    "database_name": "auto_rag_saved_answers",
    "database_id": "YOUR_COPIED_DATABASE_ID_HERE"
    }
    ]
    // ...
    ```

    - Apply the database schema migration:

    ```bash
    # Run locally (requires .wrangler dir setup by `npm run dev` first if not run)
    npx wrangler d1 execute auto_rag_saved_answers --local --file=./migrations/0001_create_saved_answers.sql

    # Or apply directly to the remote DB (recommended before first deploy)
    npx wrangler d1 execute auto_rag_saved_answers --remote --file=./migrations/0001_create_saved_answers.sql
    ```

4.  **Configure AutoRAG Instance Name:**

    - Open the backend worker file: `workers/app.ts`.
    - Locate the line `const autoRagInstanceName = "my-autorag";` within the `/api/ask` route handler.
    - Replace `"my-autorag"` with the **exact name** of your deployed AutoRAG instance.

    ```typescript
    // workers/app.ts
    // ... inside /api/ask handler ...
    // --- IMPORTANT: Replace "my-autorag" with your actual AutoRAG instance name ---
    const autoRagInstanceName = "YOUR_AUTORAG_INSTANCE_NAME";
    // ...
    ```

## Development

Start the development server (Vite + Wrangler) with HMR:

```bash
npm run dev
```

Your application will be available at `http://localhost:5173` (or the port specified by Wrangler).
The development server uses local emulation for the Worker and D1.

## Building for Production

Create a production build of the frontend assets and the worker:

```bash
npm run build
```

## Deployment

Deploy the application to your Cloudflare account using Wrangler:

```bash
npm run deploy
```

This command builds the application and deploys the worker, including static assets, to Cloudflare.

---

Vibe Coded by Dennis 😄
